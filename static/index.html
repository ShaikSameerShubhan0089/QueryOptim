<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MariaDB Query Optimizer</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="app">
    <header>
      <h1>âš¡ MariaDB Query Optimizer â€” AI Agents</h1>
      <p>Paste your SQL, run the analysis, and see AI-powered insights instantly.</p>
    </header>

    <main>
      <section class="input-box">
        <textarea id="sql" placeholder="Paste SQL query here..."></textarea>
        <div class="controls">
          <select id="sandbox">
            <option value="true">Run in Sandbox (Safe)</option>
            <option value="false">Run in Production</option>
          </select>
          <button id="run">â–¶ Run Analysis</button>
          <button id="clear">âœ– Clear</button>
          <button onclick="analyzeSchema()">ğŸ” Analyze Schema</button>
          <div id="schema-results"></div>
        </div>
      </section>

      <section id="message" class="hidden"></section>

      <section id="results" class="hidden">
        <div class="card">
          <div id="summary"></div>
        </div>

        <div class="card">
          <h2>âœ… Query Optimization</h2>
          <div id="opt-query"></div>
        </div>

        <div class="card">
          <h2>ğŸ’¡ Recommendations & Impact</h2>
          <h3>Optimization Tips</h3>
          <div id="recommendations"></div>
          <h3>âš ï¸ Warnings</h3>
          <div id="warnings"></div>
          <h3>ğŸ“ˆ Performance Impact</h3>
          <div id="impact"></div>
        </div>

        <div class="card">
          <h2>ğŸ¤– AI Agent Analysis</h2>
          <div id="ai-notes"></div>
        </div>

        <div class="card">
          <h2>ğŸ› ï¸ Technical Details</h2>
          <h3>EXPLAIN Plan</h3>
          <div id="plan"></div>
          <h3>Sample Results</h3>
          <div id="rows"></div>
        </div>

        <div class="card">
          <h2>ğŸ“Š Schema Context</h2>
          <div id="raw"></div>
        </div>
      </section>
    </main>

    <footer>
      <p>Built with â¤ï¸ using FastAPI + MariaDB + Groq AI</p>
    </footer>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>
